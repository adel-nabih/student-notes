@if (isOpen) {
  <div class="modal-overlay" (click)="handleClose()">
    
    <div class="modal-content" (click)="$event.stopPropagation()">
      <h3>{{ modalTitle }}</h3>
      
      <form (submit)="handleSave(); $event.preventDefault()">
        <div class="form-group">
          <label for="subject">Subject</label>
          <input 
            type="text" 
            id="subject" 
            [(ngModel)]="subject" 
            name="subject" 
            required>
        </div>
        
        <div class="form-group">
          <label for="message">Message</label>
          <textarea 
            id="message" 
            [(ngModel)]="message" 
            name="message" 
            rows="6" 
            required></textarea>
        </div>

        @if (errorMsg()) {
          <p class="error-message">{{ errorMsg() }}</p>
        }

        <div class="modal-actions">
          <button type="button" class="btn-cancel" (click)="handleClose()">
            Cancel
          </button>
          <button type="submit" class="btn-save" [disabled]="isSubmitting()">
            @if (isSubmitting()) {
              <span>Saving...</span>
            } @else {
              <span>Save</span>
            }
          </button>
        </div>
      </form>

    </div>
  </div>
}